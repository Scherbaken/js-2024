<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>

	<div id="cnt"></div>
	<style>
		#cnt {
			position: relative;
			width: 400px;
			height: 400px;
			border: 2px solid blue;
		}

		button {
			position: absolute;
			left: 200px;
			top: 200px;
		}
	</style>
	<script>

		// class TPair {
		// 	constructor(num1, num2, minNum1, maxNum1, minNum2, maxNum2) {
		// 		this.num1 = num1
		// 		this.num2 = num2
		// 		this.minNum1 = minNum1
		// 		this.maxNum1 = maxNum1
		// 		this.minNum2 = minNum2
		// 		this.maxNum2 = maxNum2
		// 	}
		// 	increase() {
		// 		this.num2++
		// 		if (this.num2 > this.maxNum2) {
		// 			this.num2 = this.minNum2
		// 			this.num1++
		// 			if (this.num1 > this.maxNum1) {
		// 				this.num1 = this.minNum1
		// 			}
		// 		}
		// 	}
		// 	decrease() {
		// 		if (this.num2 === this.minNum2) {
		// 			this.num2 += this.maxNum2 + 1
		// 			this.num1--
		// 			if (this.num1 < this.minNum1) {
		// 				this.min1 = this.maxNum1
		// 			}
		// 		}
		// 		this.num2--
		// 	}
		// 	toString() {
		// 		return `${this.num1}:${this.num2}`
		// 	}
		// }

		// class TTime extends TPair {
		// 	constructor(hours, minutes) {
		// 		super(hours, minutes, 0, 23, 0, 59)
		// 	}
		// 	get Hours() {
		// 		return this.num1
		// 	}
		// 	get Minutes() {
		// 		return this.num2
		// 	}
		// }

		// class TMoney extends TPair {
		// 	constructor(hryvna, kop) {
		// 		super(hryvna, kop, 0, Infinity, 0, 99)
		// 	}
		// 	get Hrn() {
		// 		return this.num1
		// 	}
		// 	get Coins() {
		// 		return this.num2
		// 	}
		// }

		// const t1 = new TTime(12, 0)
		// const t2 = new TMoney(50, 99)
		// t2.increase()
		// // document.write(t2)
		// document.write(t2.Hrn)

		class DataList {
			constructor({ elementsSelector, propTitle, dataList }) {
				if (Array.isArray(dataList)) this.dataList = [...dataList]
				else this.dataList = this.readFromElements(elementsSelector, propTitle)
			}
			getMax() {
				return Math.max(...this.dataList)
			}
			getMin() {
				return Math.min(...this.dataList)
			}
			getAverage() {
				const sum = this.dataList.reduce((prevSum, el) => prevSum + el)
				return sum / this.dataList.length
			}
			renderList() {
				const average = this.getAverage()
				const olEl = document.createElement('ol')
				for (const el of this.dataList) {
					const liEl = document.createElement('li')
					liEl.innerText = el
					if (el > average) liEl.style.color = 'red'
					olEl.append(liEl)
				}
				return olEl
			}
			readFromElements(elementsSelector, propTitle) {
				const elemList = document.querySelectorAll(elementsSelector)
				const list = []
				for (const el of elemList) {
					this.list.push(parseFloat(el[propTitle]))
				}
				return list
			}
		}

		class PriceList extends DataList {
			constructor({ elementsSelector, dataList }) {
				super({ elementsSelector, propTitle: 'innerText', dataList })
			}
			getTotalPrice() {
				return this.dataList.reduce((prevSum, el) => prevSum + el)
			}
		}
		class WorkreList extends DataList {
			constructor({ elementsSelector, dataList }) {
				super({ elementsSelector, propTitle: 'value', dataList })
			}
			getPensionerList(pensionerAge) {
				return this.dataList.filter(el => el >= pensionerAge)
			}
		}
		// const ddd = new DataList({ dataList: [2, 3, 4, 5, 6, 7, 8, 12, 3, 2] })
		// document.getElementById('cnt').append(ddd.renderList())
		// document.write(ddd.getAverage())


		class CrazyButton {
			constructor(title, maxStep, containerSelector) {
				this.title = title
				this.maxStep = maxStep
				this.element = this.render(containerSelector)
			}
			moveTo(stepLeft, stepTop) {
				const newLeft = parseInt(this.element.style.left) + stepLeft
				const newTop = parseInt(this.element.style.top) + stepTop
				this.element.style.left = newLeft + 'px'
				this.element.style.top = newTop + 'px'
			}
			jump() {
				const stepLeft = -this.maxStep + Math.floor(Math.random() * 2 * this.maxStep)
				const stepTop = -this.maxStep + Math.floor(Math.random() * 2 * this.maxStep)
				this.moveTo(stepLeft, stepTop)
			}
			render(containerSelector) {
				const btn = document.createElement('button')
				btn.innerText = this.title
				btn.onmouseenter = this.jump.bind(this)
				btn.style.left = '100px'
				btn.style.top = '100px'
				if (containerSelector) document.querySelector(containerSelector).append(btn)
				return btn
			}
		}

		class MovableCrazyButton extends CrazyButton {
			constructor(title, maxStep, containerSelector, speed, vLeft, vTop, maxLeft, maxTop) {
				super(title, maxStep, containerSelector)
				this.speed = speed
				this.vLeft = vLeft
				this.vTop = vTop
				this.start()
				this.maxLeft = maxLeft
				this.maxTop = maxTop
			}
			move() {
				const left = parseInt(this.element.style.left)
				const top = parseInt(this.element.style.top)

				if (left < 0 || left > this.maxLeft) this.vLeft = -this.vLeft
				if (top < 0 || top > this.maxTop) this.vTop = -this.vTop
				this.moveTo(this.vLeft, this.vTop)
			}
			start(containerSelector) {
				const btn = super.render(containerSelector)
				setInterval(this.move.bind(this), this.speed)
			}
		}

		let newBtn = new MovableCrazyButton('test', 50, '#cnt', 50, 5, 10, 400, 400)

	</script>
</body>

</html>